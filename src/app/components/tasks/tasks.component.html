<mat-card>
  <mat-card-title (click)="RevealDetails()">
    <div class="flex-container">
      <span class="flex-left">{{ task?.task_name }}</span>
      <span class="flex-right">{{ task.percentage_complete }}%</span>
    </div>
    <app-progress-bar
      [Task]="task"
    ></app-progress-bar>
  </mat-card-title>
  <div *ngIf="detailsRevealed">
    <mat-card-content>{{ task?.task_desc }}</mat-card-content>
    <br />
    <h2>Subtasks</h2>
    <app-subtask-card
      *ngFor="let subtask of subtasks"
      [Subtask]="subtask"
      [Task]="task"
      (deleted)="handleSubTaskDeletion($event)"
      (workLogged)="UpdatePercentage()"
    ></app-subtask-card>
    <div *ngIf="subtasks.length === 0">
      <button
        type="button"
        class="button"
      (click)="DeleteTask()">Delete</button>
    </div>
    <div #subtaskButton>
      <button
        type="button"
        class="button full-width"
        (click)="RevealModal(true)"
      >
        New Sub-Task
      </button>
    </div>
    <app-new-subtask-modal
      *ngIf="addSubtask"
      [task]="task"
      [subtasks]="subtasks"
      (addedTask) ="UpdatePercentage()"
      (close)="RevealModal(false)"
    ></app-new-subtask-modal>
  </div>
</mat-card>
